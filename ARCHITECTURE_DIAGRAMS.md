# ğŸ“Š AI Models Architecture & Data Flow

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OCR FRONTEND WITH AI                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   User Interface   â”‚      â”‚   Camera/File Input            â”‚ â”‚
â”‚  â”‚                    â”‚      â”‚                                â”‚ â”‚
â”‚  â”‚ â€¢ Upload Button    â”‚â—„â”€â”€â”€â”€â”€â”¤ â€¢ Camera Stream                â”‚ â”‚
â”‚  â”‚ â€¢ Quality Display  â”‚      â”‚ â€¢ File Selection               â”‚ â”‚
â”‚  â”‚ â€¢ Preview Modal    â”‚      â”‚ â€¢ Real-time Feedback           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â”‚                             â”‚                    â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          IMAGE ANALYSIS ENGINE (aiModels.js)             â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚  Pre-processing  â”‚  â”‚  Quality Assessors       â”‚      â”‚  â”‚
â”‚  â”‚  â”‚                  â”‚  â”‚                          â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Load Image     â”‚â”€â”€â”¤ â€¢ Brightness Analyzer    â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Resize         â”‚  â”‚ â€¢ Contrast Analyzer      â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Convert Format â”‚  â”‚ â€¢ Sharpness Detector     â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Extract Canvas â”‚  â”‚ â€¢ Blur Detector          â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â€¢ Noise Analyzer         â”‚      â”‚  â”‚
â”‚  â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚  Edge Detection  â”‚  â”‚  Document Detection      â”‚      â”‚  â”‚
â”‚  â”‚  â”‚  (Sobel Filter)  â”‚  â”‚                          â”‚      â”‚  â”‚
â”‚  â”‚  â”‚                  â”‚â”€â”€â”¤ â€¢ Find Boundaries        â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Gx Gradient    â”‚  â”‚ â€¢ Calculate Contours     â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Gy Gradient    â”‚  â”‚ â€¢ Estimate Corners       â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Edge Magnitude â”‚  â”‚ â€¢ Validate Rectangle     â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚ Orientation      â”‚  â”‚ Output Generation        â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ Detection        â”‚  â”‚                          â”‚      â”‚  â”‚
â”‚  â”‚  â”‚                  â”‚â”€â”€â”¤ â€¢ Combine all results    â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Edge Direction â”‚  â”‚ â€¢ Generate issues list   â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Angle Histogramâ”‚  â”‚ â€¢ Create suggestions     â”‚      â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Text Alignment â”‚  â”‚ â€¢ Calculate confidence   â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                                            â”‚
â”‚                     â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        ANALYSIS RESULT OBJECT                            â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ {                                                         â”‚  â”‚
â”‚  â”‚   isValid: boolean,                                      â”‚  â”‚
â”‚  â”‚   quality: {                                             â”‚  â”‚
â”‚  â”‚     brightness: { score, value },                        â”‚  â”‚
â”‚  â”‚     contrast: { score, stdDev },                         â”‚  â”‚
â”‚  â”‚     sharpness: { score, value },                         â”‚  â”‚
â”‚  â”‚     blur: { blurLevel, isBlurry },                       â”‚  â”‚
â”‚  â”‚     noise: { noiseLevel }                                â”‚  â”‚
â”‚  â”‚   },                                                     â”‚  â”‚
â”‚  â”‚   documentBounds: { detected, boundaries },             â”‚  â”‚
â”‚  â”‚   orientation: { suggestedRotation },                    â”‚  â”‚
â”‚  â”‚   issues: [ "Issue 1", "Issue 2" ],                      â”‚  â”‚
â”‚  â”‚   suggestions: [ "Suggestion 1" ]                        â”‚  â”‚
â”‚  â”‚ }                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                                            â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚         â”‚           â”‚           â”‚                               â”‚
â”‚         â–¼           â–¼           â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   Store    â”‚ â”‚  Display â”‚ â”‚  Log to      â”‚                â”‚
â”‚  â”‚  in State  â”‚ â”‚ Quality  â”‚ â”‚  Analytics   â”‚                â”‚
â”‚  â”‚            â”‚ â”‚ Report   â”‚ â”‚              â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow: Image Upload with AI

```
User Selects Image
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validate File Type  â”‚ â—„â”€â”€â”€ Check extension
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check File Size     â”‚ â—„â”€â”€â”€ < 16MB
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Load Image & Get Dimensions  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Run AI Analysis (analyzeImageWithAI)      â”‚
â”‚                                           â”‚
â”‚ â€¢ Document Detection                      â”‚
â”‚ â€¢ Quality Assessment                      â”‚
â”‚ â€¢ Orientation Analysis                    â”‚
â”‚ â€¢ Generate Issues & Suggestions           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Analysis Complete              â”‚
â”‚ isValid = true/false           â”‚
â”‚ quality = 0-1 score            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ If Valid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                   â”‚
       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                    â”‚ User Confirms & Validates   â”‚
       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                   â”‚
       â”‚                                   â–¼
       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                    â”‚ Store Temp (uploadedFiles)â”‚
       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                   â”‚
       â”‚                                   â–¼
       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                    â”‚ User Clicks Upload       â”‚
       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                   â”‚
       â”‚                                   â–¼
       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                    â”‚ Apply AI-Suggested       â”‚
       â”‚                    â”‚ Rotation                 â”‚
       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                   â”‚
       â”‚                                   â–¼
       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                    â”‚ Send to Backend/Server   â”‚
       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                   â”‚
       â”‚                                   â–¼
       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                    â”‚ âœ… Upload Complete      â”‚
       â”‚                    â”‚ Mark as Uploaded        â”‚
       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â”€â”€ If Invalid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Show Quality Report Modal    â”‚
                            â”‚ Display Issues & Suggestions â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ User Decision               â”‚
                            â”‚ â€¢ Retake Photo              â”‚
                            â”‚ â€¢ Continue Anyway            â”‚
                            â”‚ â€¢ Cancel Upload              â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Real-Time Camera Flow

```
Camera Opened
    â”‚
    â–¼
Start Video Stream
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Every 500ms: Sample Video Frame          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Draw Frame to Canvas                     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get Real-Time Quality Feedback           â”‚
â”‚                                          â”‚
â”‚ â€¢ Calculate Focus Score                  â”‚
â”‚ â€¢ Analyze Brightness                     â”‚
â”‚ â€¢ Check Edge Detection                   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Generate Feedback Object                 â”‚
â”‚                                          â”‚
â”‚ {                                        â”‚
â”‚   brightness: "âœ… Good" / "âš ï¸ Adjust",  â”‚
â”‚   focus: "âœ… Focused" / "âŒ Blurry",    â”‚
â”‚   positioning: "âœ… Centered",            â”‚
â”‚   ready: true/false                      â”‚
â”‚ }                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Call Feedback Callback                   â”‚
â”‚ Update UI in Real-Time                   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€ Ready = True â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                    â”‚
       â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                         â”‚ Show "Ready" Button  â”‚
       â”‚                         â”‚ Pulse Green         â”‚
       â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â”€â”€ Ready = False â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                            â”‚
                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚ Show Guidance Message    â”‚
                             â”‚ Explain What to Adjust   â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚ User Moves Camera       â”‚
                             â”‚ Loop Back to Top         â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Loop until User Captures or Closes
```

---

## Algorithm Breakdown: Edge Detection

```
INPUT: RGB Image
    â”‚
    â–¼
Convert to Grayscale
    â”‚
    â–¼
Apply Sobel Operator
â”‚
â”œâ”€ Gx (Horizontal Edges)     â”‚ -1  0  +1 â”‚
â”‚                            â”‚ -2  0  +2 â”‚ Ã— Pixel
â”‚                            â”‚ -1  0  +1 â”‚
â”‚
â””â”€ Gy (Vertical Edges)       â”‚ -1  -2  -1 â”‚
                             â”‚  0   0   0 â”‚ Ã— Pixel
                             â”‚ +1  +2  +1 â”‚
    â”‚
    â–¼
Calculate Edge Magnitude
â”‚
â””â”€ magnitude = sqrt(GxÂ² + GyÂ²)
    â”‚
    â–¼
Threshold Filter (> 100)
    â”‚
    â–¼
Find Connected Components (Contours)
    â”‚
    â–¼
Estimate Document Boundaries
â”‚
â”œâ”€ Find Min/Max X, Y
â”œâ”€ Calculate Area Ratio
â”œâ”€ Check Rectangular Shape
â””â”€ Validate Aspect Ratio
    â”‚
    â–¼
OUTPUT: Document Bounds Object
{
  detected: boolean,
  confidence: 0-1,
  bounds: { x, y, width, height }
}
```

---

## Quality Scoring Components

```
OVERALL QUALITY = (Brightness + Contrast + Sharpness) / 3

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BRIGHTNESS SCORE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input: Average pixel value (0-255)          â”‚
â”‚ Optimal range: 80-200                       â”‚
â”‚ Scoring:                                    â”‚
â”‚  â€¢ 0-80: Score = value/160 (0-0.5)         â”‚
â”‚  â€¢ 80-200: Score = 0.5-1.0 (optimal)       â”‚
â”‚  â€¢ 200+: Score = 1.0 - (excess/200)        â”‚
â”‚ Output: 0-1 score                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CONTRAST SCORE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input: Pixel brightness array               â”‚
â”‚ Calculate: Standard Deviation of grays      â”‚
â”‚ Scoring:                                    â”‚
â”‚  â€¢ Score = min(1, stdDev / 128)            â”‚
â”‚ Output: 0-1 score                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SHARPNESS SCORE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input: Image pixel data                     â”‚
â”‚ Apply: Laplacian operator                   â”‚
â”‚        â”‚ 0  -1   0 â”‚                        â”‚
â”‚        â”‚-1   4  -1 â”‚ Ã— Pixel                â”‚
â”‚        â”‚ 0  -1   0 â”‚                        â”‚
â”‚ Calculate: Sum of absolute Laplacian values â”‚
â”‚ Scoring:                                    â”‚
â”‚  â€¢ Score = min(1, laplacian / 500)         â”‚
â”‚ Output: 0-1 score                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BLUR DETECTION                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input: Laplacian variance                   â”‚
â”‚ Scoring:                                    â”‚
â”‚  â€¢ Variance < 100: Likely blurry           â”‚
â”‚  â€¢ Variance > 1000: Sharp                   â”‚
â”‚ Output: 0-1 blur level                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOISE ASSESSMENT                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input: RGB channels                         â”‚
â”‚ Calculate: Avg color channel difference     â”‚
â”‚ Scoring:                                    â”‚
â”‚  â€¢ Low difference: Clean image              â”‚
â”‚  â€¢ High difference: Noisy image             â”‚
â”‚ Output: 0-1 noise level                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Class Hierarchy

```
smartCameraAI.js
â”‚
â”œâ”€â”€ CameraQualityMonitor
â”‚   â”œâ”€â”€ startMonitoring()
â”‚   â”œâ”€â”€ stopMonitoring()
â”‚   â””â”€â”€ analyzeFrame()
â”‚
â”œâ”€â”€ DocumentEdgeDetector
â”‚   â”œâ”€â”€ drawEdges()
â”‚   â”œâ”€â”€ detectEdges()
â”‚   â””â”€â”€ renderEdges()
â”‚
â”œâ”€â”€ SmartFocusGuide
â”‚   â”œâ”€â”€ calculateFocusScore()
â”‚   â”œâ”€â”€ getFocusGuidance()
â”‚   â””â”€â”€ updateHistory()
â”‚
â”œâ”€â”€ CaptureOptimizer
â”‚   â”œâ”€â”€ isReadyForCapture()
â”‚   â””â”€â”€ getReadyReason()
â”‚
â”œâ”€â”€ EnhancementSuggestions (static)
â”‚   â””â”€â”€ generateSuggestions()
â”‚
â””â”€â”€ GestureControl
    â”œâ”€â”€ detectOKGesture()
    â””â”€â”€ euclideanDistance()
```

---

## Integration Points in Components

```
SHGUploadSection.jsx
â”‚
â”œâ”€â”€ handleFileSelect()
â”‚   â””â”€â–º analyzeImageWithAI(file)
â”‚       â””â”€â–º Set uploadedFiles with analysis
â”‚
â”œâ”€â”€ renderSHGCard()
â”‚   â””â”€â–º <QualityIndicator analysis={fileData.analysis} />
â”‚
â””â”€â”€ handleUploadAllFiles()
    â””â”€â–º Store & upload with rotation


smartcamera.jsx
â”‚
â”œâ”€â”€ useEffect() - Camera Init
â”‚   â””â”€â–º new CameraQualityMonitor()
â”‚       â””â”€â–º startMonitoring()
â”‚
â”œâ”€â”€ handleCameraCapture()
â”‚   â””â”€â–º analyzeImageWithAI(file)
â”‚       â””â”€â–º Show validation result
â”‚
â””â”€â”€ JSX Render
    â””â”€â–º {cameraFeedback && <FeedbackUI />}
```

---

## Performance Optimization Strategy

```
Image Processing Pipeline
â”‚
â”œâ”€â–º Input: Large image (e.g., 4000Ã—3000)
â”‚   â”‚
â”‚   â–¼
â”‚   RESIZE: Scale to max 1000Ã—1000
â”‚   (Reduces pixels by 94%)
â”‚   â”‚
â”‚   â–¼
â”‚   CANVAS OPERATIONS: 
â”‚   â”œâ”€ Draw image to canvas
â”‚   â”œâ”€ Extract ImageData (once)
â”‚   â””â”€ Reuse for all operations
â”‚   â”‚
â”‚   â–¼
â”‚   VECTORIZED CALCULATIONS:
â”‚   â”œâ”€ Single loop through pixels
â”‚   â”œâ”€ Calculate all metrics in one pass
â”‚   â””â”€ Minimize memory allocations
â”‚   â”‚
â”‚   â–¼
â”‚   OFFSCREEN CANVAS: (Optional)
â”‚   â””â”€ Prevent blocking main thread
â”‚   â”‚
â”‚   â–¼
â”‚   OUTPUT: Analysis result

Real-Time Camera Pipeline
â”‚
â”œâ”€â–º Input: Video stream (30 FPS)
â”‚   â”‚
â”‚   â–¼
â”‚   SAMPLING: Analyze every 500ms
â”‚   (Analyze 2/60 = 3% of frames)
â”‚   â”‚
â”‚   â–¼
â”‚   QUICK FEEDBACK: Fast algorithms only
â”‚   â””â”€ Skip full analysis
â”‚       Use simplified metrics
â”‚   â”‚
â”‚   â–¼
â”‚   OUTPUT: Feedback in <50ms
```

---

## Error Handling Flow

```
Try: analyzeImageWithAI()
â”‚
â”œâ”€â–º Success
â”‚   â””â”€â–º Return analysis object
â”‚
â””â”€â–º Error
    â”‚
    â”œâ”€â–º File read error
    â”‚   â””â”€â–º Return { error, isValid: false }
    â”‚
    â”œâ”€â–º Canvas error
    â”‚   â””â”€â–º Return { error, isValid: false }
    â”‚
    â”œâ”€â–º Analysis error
    â”‚   â””â”€â–º Log to console
    â”‚       Return { error, issues: [...] }
    â”‚
    â””â”€â–º Timeout (>5000ms)
        â””â”€â–º Cancel analysis
            Return { error: "Analysis timeout" }
```

This architecture provides **flexibility**, **performance**, and **reliability** for production use! ğŸ¯
